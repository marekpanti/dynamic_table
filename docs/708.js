"use strict";(self.webpackChunkdynamicTable=self.webpackChunkdynamicTable||[]).push([[708],{4708:(k,s,c)=>{c.r(s),c.d(s,{TableModule:()=>Q});var r=c(4006),d=c(8729),t=c(4650),f=c(6895),l=c(2143),p=c(9549),_=c(4144),h=c(4859);let T=(()=>{class o{precise(e){return Math.round(parseFloat((e*Math.pow(10,5)).toFixed(5)))/Math.pow(10,5)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),C=(()=>{class o{constructor(e){this.tableService=e,this.finalCalcul=0}ngOnChanges(){this.finalCalcul=0;for(let e in this.accountArray)this.finalCalcul=this.tableService.precise(this.finalCalcul+this.accountArray[e])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-summary"]],inputs:{accountArray:"accountArray"},features:[t.TTD],decls:4,vars:1,template:function(e,a){1&e&&(t.TgZ(0,"p"),t._uU(1,"Together in all accounts: "),t.TgZ(2,"strong"),t._uU(3),t.qZA()()),2&e&&(t.xp6(3),t.Oqu(a.finalCalcul))}}),o})();function b(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1,"ID"),t.qZA())}function w(o,n){if(1&o&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.id)}}function g(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1,"First Name"),t.qZA())}function y(o,n){1&o&&(t.TgZ(0,"td",20)(1,"mat-form-field"),t._UZ(2,"input",21),t.qZA()()),2&o&&t.Q6J("formGroupName",n.index)}function N(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1,"Last Name"),t.qZA())}function Z(o,n){1&o&&(t.TgZ(0,"td",20)(1,"mat-form-field"),t._UZ(2,"input",22),t.qZA()()),2&o&&t.Q6J("formGroupName",n.index)}function x(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1,"Account"),t.qZA())}function A(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",20)(1,"mat-form-field")(2,"input",23),t.NdJ("change",function(){t.CHM(e);const m=t.oxw();return t.KtG(m.getAccounts())}),t.qZA()()()}2&o&&t.Q6J("formGroupName",n.index)}function v(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1,"delete"),t.qZA())}function R(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const m=t.oxw(),i=m.index,u=m.$implicit,S=t.oxw();return t.KtG(S.removeRow(i,u.id))}),t._uU(1," delete "),t.qZA()}}function U(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(e);const m=t.oxw().index,i=t.oxw();return t.KtG(i.undoDelete(m))}),t._uU(1," undo "),t.qZA()}}function F(o,n){if(1&o&&(t.TgZ(0,"td",24),t.YNc(1,R,2,0,"button",25),t.YNc(2,U,2,0,"button",26),t.qZA()),2&o){const e=n.index,a=t.oxw();t.Q6J("formGroupName",e),t.xp6(1),t.Q6J("ngIf",!a.undoRow[e].showUndo),t.xp6(1),t.Q6J("ngIf",a.undoRow[e].showUndo)}}function J(o,n){1&o&&t._UZ(0,"tr",29)}function D(o,n){1&o&&t._UZ(0,"tr",30)}const M=[{path:"",component:(()=>{class o{constructor(e){this._fb=e,this.displayedColumns=["id","firstName","lastName","account","delete"],this.undoRow=[{showUndo:!1,timer:0}],this.countId=0}ngOnInit(){this.myForm=this._fb.group({testField:["testValue"],rows:this._fb.array([this.initRows(0)])}),this.dataSource=this.myForm.controls.rows.value}initRows(e){return this._fb.group({firstName:["test"],lastName:[""],account:[],id:[e]})}removeRow(e,a){this.undoRow[e].showUndo=!0;const m=this.myForm.controls.rows;this.undoRow[e].timer=setTimeout(()=>{const i=m.value.map(u=>u.id).indexOf(a);m.removeAt(i),this.undoRow.splice(i,1),this.dataSource=this.myForm.controls.rows.value,this.getAccounts()},3e3)}addRows(){this.countId++,this.myForm.controls.rows.push(this.initRows(this.countId)),this.dataSource=this.myForm.controls.rows.value,this.undoRow.push({showUndo:!1,timer:0})}undoDelete(e){this.undoRow[e].showUndo=!1,clearTimeout(this.undoRow[e].timer)}getAccounts(){this.accountArray=this.myForm.controls.rows.value.map(e=>e.account)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-table"]],decls:28,vars:5,consts:[[1,"content"],["novalidate","",3,"formGroup"],["matInput","","formControlName","testField",1,"form-control"],["formArrayName","rows"],["mat-table","",1,"table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstName"],["mat-cell","",3,"formGroupName",4,"matCellDef"],["matColumnDef","lastName"],["matColumnDef","account"],["matColumnDef","delete"],["mat-cell","","class","specialcell",3,"formGroupName",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","","color","primary",3,"click"],[3,"accountArray"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",3,"formGroupName"],["matInput","","formControlName","firstName",1,"form-control"],["matInput","","formControlName","lastName",1,"form-control"],["type","number","matInput","","formControlName","account",1,"form-control",3,"change"],["mat-cell","",1,"specialcell",3,"formGroupName"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Marek's dynamic table"),t.qZA(),t.TgZ(3,"form",1)(4,"mat-form-field"),t._UZ(5,"input",2),t.qZA(),t.TgZ(6,"div",3)(7,"table",4),t.ynx(8,5),t.YNc(9,b,2,0,"th",6),t.YNc(10,w,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,g,2,0,"th",6),t.YNc(13,y,3,1,"td",9),t.BQk(),t.ynx(14,10),t.YNc(15,N,2,0,"th",6),t.YNc(16,Z,3,1,"td",9),t.BQk(),t.ynx(17,11),t.YNc(18,x,2,0,"th",6),t.YNc(19,A,3,1,"td",9),t.BQk(),t.ynx(20,12),t.YNc(21,v,2,0,"th",6),t.YNc(22,F,3,3,"td",13),t.BQk(),t.YNc(23,J,1,0,"tr",14),t.YNc(24,D,1,0,"tr",15),t.qZA(),t.TgZ(25,"button",16),t.NdJ("click",function(){return a.addRows()}),t._uU(26,"Add Row"),t.qZA()()(),t._UZ(27,"app-summary",17),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroup",a.myForm),t.xp6(4),t.Q6J("dataSource",a.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(3),t.Q6J("accountArray",a.accountArray))},dependencies:[f.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,p.KE,_.Nt,h.lW,C],styles:[".content[_ngcontent-%COMP%]{margin:5rem auto;width:80%;max-width:600px;min-width:380px}.content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin:1rem 0}.content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]     .mat-form-field{margin-right:1rem}"]}),o})()}];let Y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(M),d.Bz]}),o})(),Q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[f.ez,r.u5,r.UX,Y,l.p0,p.lN,_.c,h.ot]}),o})()}}]);