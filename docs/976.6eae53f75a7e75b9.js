"use strict";(self.webpackChunkdynamicTable=self.webpackChunkdynamicTable||[]).push([[976],{3976:(z,d,c)=>{c.r(d),c.d(d,{TableModule:()=>B});var l=c(4006),f=c(5932),t=c(4650),b=c(5762),p=c(1086);let T=(()=>{class e extends b.ObservableStore{constructor(){super({trackStateHistory:!0}),this.setState({table:[],timeOuts:{}},"INIT_STATE")}get(){const{table:o}=this.getState();return(0,p.of)(o||null)}add(o){let n=this.getState().table,r=null;n.find((u,H)=>(r=H,u.id===o.id))?n[r]={...o}:n=[...n,o],this.setState({table:n},"ADD_ROW_TO_TABLE")}changeUndoState(o){let n=this.getState().table;const r=n.findIndex(i=>i.id===o);n[r].showUndo=!n[r].showUndo,this.setState({table:n},"CHANGE_UNDO_STATE")}removeRow(o){let n=this.getState().table;const r=n.findIndex(i=>i.id===o);n.splice(r,1),this.setState({table:n},"REMOVE_ROW_ID")}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _=c(4850);let C=(()=>{class e{precise(o){return Math.round(parseFloat((o*Math.pow(10,5)).toFixed(5)))/Math.pow(10,5)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),h=(()=>{class e{constructor(o,n){this.store=o,this.tableService=n,this.timeOuts={}}removeRow(o){this.store.changeUndoState(o),this.timeOuts[o]=setTimeout(()=>{this.store.removeRow(o)},3e3)}addToStore(o){const n={...o,showUndo:!1};this.store.add(n)}undoRemove(o){clearTimeout(this.timeOuts[o]),this.store.changeUndoState(o),this.timeOuts[o]=null}calculateTotalAccounts(){return this.store.stateChanged.pipe((0,_.U)(o=>{let r,n=0;if(o.table.length>0){r=o.table.map(i=>i.account);for(let i in r)n=this.tableService.precise(n+r[i])}return n}))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(T),t.LFG(C))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var s=c(6895),w=c(4859),g=c(3336),v=c(9549),N=c(4144),m=c(671);let Z=(()=>{class e{constructor(o){this.facade=o,this.finalCalcul$=this.facade.calculateTotalAccounts()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-summary"]],decls:5,vars:3,template:function(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"Together in all accounts: "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"async"),t.qZA()()),2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,1,n.finalCalcul$)))},dependencies:[s.Ov]}),e})();function x(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1,"ID"),t.qZA())}function y(e,a){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.id)}}function S(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1,"First Name"),t.qZA())}function A(e,a){1&e&&(t.TgZ(0,"td",20)(1,"mat-form-field"),t._UZ(2,"input",21),t.qZA()()),2&e&&t.Q6J("formGroupName",a.index)}function I(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1,"Last Name"),t.qZA())}function U(e,a){1&e&&(t.TgZ(0,"td",20)(1,"mat-form-field"),t._UZ(2,"input",22),t.qZA()()),2&e&&t.Q6J("formGroupName",a.index)}function R(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1,"Account"),t.qZA())}function F(e,a){1&e&&(t.TgZ(0,"td",20)(1,"mat-form-field"),t._UZ(2,"input",23),t.qZA()()),2&e&&t.Q6J("formGroupName",a.index)}function O(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1,"actions"),t.qZA())}function D(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(o);const r=t.oxw().$implicit,i=t.oxw();return t.KtG(i.removeRow(r.id))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA()()}}function J(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(o);const r=t.oxw().$implicit,i=t.oxw();return t.KtG(i.undoDelete(r.id))}),t._uU(1," undo "),t.qZA()}}function Y(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"td",24)(1,"button",25),t.NdJ("click",function(){const i=t.CHM(o).index,u=t.oxw();return t.KtG(u.saveRow(i))}),t.TgZ(2,"mat-icon"),t._uU(3,"done"),t.qZA()(),t.YNc(4,D,3,0,"button",26),t.YNc(5,J,2,0,"button",27),t.qZA()}if(2&e){const o=a.$implicit,n=a.index,r=t.oxw();t.Q6J("formGroupName",n),t.xp6(1),t.Q6J("disabled",!r.myForm.valid),t.xp6(3),t.Q6J("ngIf",!o.showUndo),t.xp6(1),t.Q6J("ngIf",o.showUndo)}}function M(e,a){1&e&&t._UZ(0,"tr",30)}function Q(e,a){1&e&&t._UZ(0,"tr",31)}function k(e,a){1&e&&(t.TgZ(0,"p",32),t._uU(1," Form mast be valid and all fields filled "),t.qZA())}const G=[{path:"",component:(()=>{class e{constructor(o,n){this.store=o,this.facade=n,this.displayedColumns=["id","firstName","lastName","account","actions"],this.countId=0,this.myForm=new l.cw({testField:new l.NI("testValue"),rows:new l.Oe([this.initRows(0)])})}ngOnInit(){this.saveRow(0),this.store.stateChanged.subscribe(o=>{this.dataSource=o.table})}initRows(o){return new l.cw({firstName:new l.NI("test",l.kI.required),lastName:new l.NI("",l.kI.required),account:new l.NI(null,l.kI.required),id:new l.NI(o)})}saveRow(o){this.facade.addToStore(this.myForm.controls.rows.value[o])}removeRow(o){this.facade.removeRow(o)}addRows(){this.countId++,this.myForm.controls.rows.push(this.initRows(this.countId)),this.store.add(this.myForm.controls.rows.value[this.countId])}undoDelete(o){this.facade.undoRemove(o)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(T),t.Y36(h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-table"]],decls:29,vars:6,consts:[[1,"content"],["novalidate","",3,"formGroup"],["matInput","","formControlName","testField",1,"form-control"],["formArrayName","rows"],["mat-table","",1,"table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstName"],["mat-cell","",3,"formGroupName",4,"matCellDef"],["matColumnDef","lastName"],["matColumnDef","account"],["matColumnDef","actions"],["mat-cell","","class","specialcell",3,"formGroupName",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","warn",4,"ngIf"],["mat-button","","color","primary",3,"disabled","click"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",3,"formGroupName"],["matInput","","formControlName","firstName",1,"form-control"],["matInput","","formControlName","lastName",1,"form-control"],["type","number","matInput","","formControlName","account",1,"form-control"],["mat-cell","",1,"specialcell",3,"formGroupName"],["mat-icon-button","","aria-label","Save","color","primary",3,"disabled","click"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"warn"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Angular's dynamic table - Account Calculator"),t.qZA(),t.TgZ(3,"form",1)(4,"mat-form-field"),t._UZ(5,"input",2),t.qZA(),t.TgZ(6,"div",3)(7,"table",4),t.ynx(8,5),t.YNc(9,x,2,0,"th",6),t.YNc(10,y,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,S,2,0,"th",6),t.YNc(13,A,3,1,"td",9),t.BQk(),t.ynx(14,10),t.YNc(15,I,2,0,"th",6),t.YNc(16,U,3,1,"td",9),t.BQk(),t.ynx(17,11),t.YNc(18,R,2,0,"th",6),t.YNc(19,F,3,1,"td",9),t.BQk(),t.ynx(20,12),t.YNc(21,O,2,0,"th",6),t.YNc(22,Y,6,4,"td",13),t.BQk(),t.YNc(23,M,1,0,"tr",14),t.YNc(24,Q,1,0,"tr",15),t.qZA(),t.YNc(25,k,2,0,"p",16),t.TgZ(26,"button",17),t.NdJ("click",function(){return n.addRows()}),t._uU(27," Add Row "),t.qZA()()(),t._UZ(28,"app-summary"),t.qZA()),2&o&&(t.xp6(3),t.Q6J("formGroup",n.myForm),t.xp6(4),t.Q6J("dataSource",n.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",!n.myForm.valid),t.xp6(1),t.Q6J("disabled",!n.myForm.valid))},dependencies:[s.O5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,l.x0,l.CE,w.lW,g.Hw,v.KE,N.Nt,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,Z],styles:[".content[_ngcontent-%COMP%]{margin:5rem auto;width:80%;max-width:600px;min-width:380px}.content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin:1rem 0}.content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]     .mat-form-field{margin-right:1rem}.content[_ngcontent-%COMP%]   .warn[_ngcontent-%COMP%]{color:#f7910b}"]}),e})()}];let E=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.Bz.forChild(G),f.Bz]}),e})();var q=c(901);let B=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.ez,l.u5,l.UX,E,q.q]}),e})()}}]);